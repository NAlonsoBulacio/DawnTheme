{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      {% if template == 'product.cryotherapy' %}
        <div class="timer_countdown_bar">
          <div class="timer_countdown" id="countdown">
            <span class="timer_label">La oferta termina pronto. Â¡Date prisa!</span>
            <div class="timer_set">
              <span class="time days">00</span>
              <span class="dots_span">:</span>
              <span class="time hours">00</span>
              <span class="dots_span">:</span>
              <span class="time minutes">10</span>
              <span class="dots_span">:</span>
              <span class="time second">00</span>
            </div>
          </div>
        </div>
        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const countdownTimer = document.getElementById('countdown');
            let time = 10 * 60; // 10 minutos en segundos

            const updateCountdown = () => {
                const minutes = Math.floor(time / 60);
                let seconds = time % 60;

                seconds = seconds < 10 ? '0' + seconds : seconds;
                countdownTimer.querySelector('.time.minutes').textContent = minutes;
                countdownTimer.querySelector('.time.second').textContent = seconds;
                time--;

                if (time < 0) {
                    clearInterval(timer);
                    countdownTimer.querySelector('.timer_label').textContent = 'La oferta ha terminado.';
                }
            };

            // Inicia el temporizador
            countdownTimer.classList.remove('hidden');
            updateCountdown(); // Actualizar inmediatamente para evitar retraso
            const timer = setInterval(updateCountdown, 1000);
        });
        </script>
      {% endif %}
      <div class="announcement-bar color-{{ block.settings.color_scheme }} gradient" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>
        {%- if block.settings.text != blank -%}
          {%- if block.settings.link != blank -%}
            <a href="{{ block.settings.link }}" class="announcement-bar__link link link--text focus-inset animate-arrow">
          {%- endif -%}
              <p class="announcement-bar__message {{ block.settings.heading_size }}">
                {{ block.settings.text | escape }}
              </p>
          {%- if block.settings.link != blank -%}
            </a>
          {%- endif -%}
        {%- endif -%}
      </div>
  {%- endcase -%}
{%- endfor -%}
